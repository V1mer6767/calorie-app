<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calorie App</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1e6dff">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="header">
      <div>
        <h1>Calorie App</h1>
        <p class="sub">
          День:
          <input id="dayPicker" class="date" type="date">
          <span class="muted" id="dayHint"></span>
        </p>
      </div>

      <div class="top-actions">
        <button class="btn ghost" id="installBtn" style="display:none">Встановити</button>
        <button class="btn ghost" id="resetDayBtn" title="Очистити тільки обраний день">Очистити день</button>
        <button class="btn" id="exportBtn" title="Експорт JSON">Експорт</button>
      </div>
    </header>

    <main class="grid">
      <!-- LEFT -->
      <section class="card">
        <div class="card-title">Ціль дня + швидка аналітика</div>

        <div class="goal">
          <label>
            Ціль ккал на день
            <input id="goalKcal" type="number" min="0" step="1" placeholder="Напр. 2000">
          </label>

          <div class="goal-stats">
            <div class="stat">
              <div class="muted">З’їджено</div>
              <div class="val" id="goalEaten">0</div>
            </div>
            <div class="stat">
              <div class="muted">Залишилось</div>
              <div class="val" id="goalLeft">0</div>
            </div>
            <div class="stat">
              <div class="muted">Прогрес</div>
              <div class="val" id="goalPct">0%</div>
            </div>
          </div>

          <div class="bar">
            <div class="bar-fill" id="barFill"></div>
          </div>

          <div class="muted small" id="goalNote"></div>
        </div>

        <div class="divider"></div>

        <div class="card-title">Додати прийом їжі</div>

        <form id="mealForm" class="form">
          <div class="row">
            <label>
              Назва
              <input required id="name" placeholder="Напр. вівсянка" />
            </label>
            <label>
              Грамів / порція (опц.)
              <input id="serving" type="number" min="0" step="1" placeholder="100" />
            </label>
          </div>

          <div class="row">
            <label>
              Ккал
              <input required id="kcal" type="number" min="0" step="1" placeholder="350" />
            </label>
            <label>
              Білки (г)
              <input required id="p" type="number" min="0" step="0.1" placeholder="20" />
            </label>
          </div>

          <div class="row">
            <label>
              Жири (г)
              <input required id="f" type="number" min="0" step="0.1" placeholder="10" />
            </label>
            <label>
              Вуглеводи (г)
              <input required id="c" type="number" min="0" step="0.1" placeholder="45" />
            </label>
          </div>

          <div class="row">
            <label class="switch">
              <input id="eaten" type="checkbox" />
              <span>Вже з’їв(ла)</span>
            </label>

            <button class="btn primary" type="submit">Додати</button>
          </div>

          <div class="auto">
            <div class="auto-title">Авто-розрахунок</div>
            <div class="auto-row">
              <button class="btn ghost" type="button" id="autoKcalBtn" title="Ккал = 4*Б + 9*Ж + 4*В">
                Порахувати ккал з Б/Ж/В
              </button>
              <button class="btn ghost" type="button" id="autoMacroBtn" title="Підказка макросів під ккал (орієнтовно)">
                Підказати Б/Ж/В під ккал
              </button>
            </div>
            <div class="muted small" id="autoHint"></div>
          </div>

          <p class="hint">
            Можеш додавати “планові” страви (не з’їв), а потім просто відмічати — і підсумок дня оновиться.
          </p>
        </form>
      </section>

      <!-- RIGHT -->
      <section class="card">
        <div class="card-title">Підсумок + діаграма Б/Ж/В</div>

        <div class="summary">
          <div class="kcal">
            <div class="big" id="sumKcal">0</div>
            <div class="muted">ккал з’їдено</div>
          </div>

          <div class="macro">
            <div class="macro-row">
              <span>Білки</span><b id="sumP">0</b><span class="muted">г</span>
            </div>
            <div class="macro-row">
              <span>Жири</span><b id="sumF">0</b><span class="muted">г</span>
            </div>
            <div class="macro-row">
              <span>Вуглеводи</span><b id="sumC">0</b><span class="muted">г</span>
            </div>
          </div>

          <div class="donut-wrap">
            <canvas id="donut" width="240" height="240"></canvas>
            <div class="legend">
              <div class="leg"><span class="dot p"></span> Б: <b id="pctP">0%</b></div>
              <div class="leg"><span class="dot f"></span> Ж: <b id="pctF">0%</b></div>
              <div class="leg"><span class="dot c"></span> В: <b id="pctC">0%</b></div>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="card-title">Графік: 7 днів (ккал з’їдено)</div>
        <canvas id="weekChart" width="900" height="220" class="chart"></canvas>
        <div class="muted small" id="weekHint"></div>

        <div class="list-head">
          <div>Раціон (обраний день)</div>
          <button class="btn ghost" id="clearAllBtn" title="Видалити все назавжди">Очистити все</button>
        </div>

        <ul id="mealList" class="list"></ul>
      </section>
    </main>

    <footer class="footer">
      <span class="muted">Збереження: у твоєму браузері (localStorage). PWA працює офлайн.</span>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
